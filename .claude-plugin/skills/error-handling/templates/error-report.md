# 錯誤報告範本

## 基本資訊

```markdown
**報告時間**: YYYY-MM-DD HH:MM:SS
**錯誤 ID**: [自動生成或手動指定]
**嚴重程度**: [🟢 INFO | 🟡 WARNING | 🟠 RETRYABLE | 🔴 RECOVERABLE | ⚫ FATAL]
```

---

## 錯誤摘要

```markdown
## ⚠️ 錯誤報告

### 錯誤類型
[可重試 | 可修復 | 致命]

### 錯誤碼
[如：NET-CONN-001, FILE-002, DB-QUERY-003]

### 發生位置
**步驟**: [哪個步驟/任務]
**檔案**: [相關檔案路徑]
**行數**: [如果適用]
**函式**: [如果適用]
```

---

## 錯誤詳情

```markdown
### 原始錯誤訊息
```
[完整的錯誤訊息，保留原始格式]
```

### 堆疊追蹤
```
[如果有的話，貼上完整的 stack trace]
```

### 相關 context
- 輸入值：[觸發錯誤的輸入]
- 環境：[Node 版本、作業系統等]
- 依賴版本：[相關套件版本]
```

---

## 分析

```markdown
### 根因分析
[為什麼會發生這個錯誤，使用 5 Whys 方法]

1. Why? → [第一層原因]
2. Why? → [第二層原因]
3. Why? → [根本原因]

### 影響範圍
- 受影響的功能：[列出]
- 受影響的用戶：[如果適用]
- 資料影響：[是否有資料損失或不一致]
```

---

## 處理方案

```markdown
### 自動修復嘗試
- [ ] 嘗試 1：[描述]
  - 結果：[成功/失敗]
- [ ] 嘗試 2：[描述]
  - 結果：[成功/失敗]

### 建議行動
1. **立即行動**：[最優先的修復步驟]
2. **後續行動**：[進一步的改善措施]
3. **預防措施**：[避免再次發生的建議]

### 需要用戶協助
- [ ] [需要用戶確認或操作的項目]
```

---

## 恢復狀態

```markdown
### 恢復結果
- **狀態**：[已修復 | 部分修復 | 未修復]
- **修復方式**：[自動 | 手動 | 降級]
- **恢復時間**：YYYY-MM-DD HH:MM:SS

### 後續追蹤
- [ ] 確認功能正常
- [ ] 監控是否再次發生
- [ ] 更新文檔或測試案例
```

---

## 快速範例

### 網路錯誤範例

```markdown
## ⚠️ 錯誤報告

### 錯誤類型
🟠 可重試

### 錯誤碼
NET-CONN-002 (ETIMEDOUT)

### 發生位置
**步驟**: fetch_user_data
**檔案**: src/services/user.ts:42

### 原始錯誤訊息
```
Error: connect ETIMEDOUT 10.0.0.1:3000
    at TCPConnectWrap.afterConnect
```

### 根因分析
1. Why? → API 請求超時
2. Why? → 服務回應緩慢
3. Why? → 資料庫查詢效能問題

### 自動修復嘗試
- [x] 嘗試 1：重試請求（等待 1 秒）- 失敗
- [x] 嘗試 2：重試請求（等待 2 秒）- 成功

### 恢復結果
- **狀態**：已修復
- **修復方式**：自動（第 2 次重試成功）
```
