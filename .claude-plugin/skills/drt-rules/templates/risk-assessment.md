# 風險評估範本

## 使用說明

在開始任務前，使用此範本評估變更的風險等級，決定適用的流程。

---

## 風險評估表

### 基本資訊

```markdown
**任務 ID**: [task-id]
**任務描述**: [簡述任務內容]
**評估時間**: YYYY-MM-DD HH:MM
```

### 變更範圍檢查

| 檢查項目 | 是/否 | 備註 |
|----------|:-----:|------|
| 修改核心邏輯（認證/支付/安全）| | |
| 修改多個檔案（> 5 個）| | |
| 修改公開 API | | |
| 修改資料庫 schema | | |
| 刪除現有功能 | | |
| 影響外部整合 | | |

### 檔案路徑檢查

是否涉及以下路徑？

| 路徑模式 | 是/否 | 自動風險等級 |
|----------|:-----:|--------------|
| `/auth/`, `/security/`, `/payment/` | | 🔴 HIGH |
| `/api/`, `/public/` | | 🔴 HIGH |
| `/migration/`, `/schema/` | | 🔴 HIGH |
| `.env*`, `secrets*` | | 🔴 HIGH |
| `Dockerfile`, `*.yml` (CI/CD) | | 🟡 MEDIUM |
| `*.test.*`, `__tests__/` | | 🟢 LOW |
| `*.md`, `README` | | 🟢 LOW |

### 變更類型

| 類型 | 風險等級 | 說明 |
|------|:--------:|------|
| 文檔變更 | 🟢 LOW | README, CHANGELOG, 註解 |
| 配置調整 | 🟢 LOW | 非敏感的 json/yaml |
| 格式修正 | 🟢 LOW | 空白、縮排、lint fix |
| 新增功能 | 🟡 MEDIUM | 不影響現有邏輯 |
| Bug 修復 | 🟡 MEDIUM | 範圍明確、影響有限 |
| 重構 | 🟡 MEDIUM | 結構調整、無功能變更 |
| 核心變更 | 🔴 HIGH | 認證、支付、權限 |
| API 變更 | 🔴 HIGH | 對外介面修改 |
| 資料庫變更 | 🔴 HIGH | schema、migration |

---

## 風險等級判定

### 🟢 LOW RISK

**符合條件（全部）**:
- [ ] 只修改文檔、配置或格式
- [ ] 不涉及程式邏輯變更
- [ ] 不涉及敏感路徑

**適用流程**:
```
DEVELOPER → 自動驗證 → 完成
```

### 🟡 MEDIUM RISK

**符合條件（任一）**:
- [ ] 新增功能（不影響現有邏輯）
- [ ] Bug 修復（範圍明確）
- [ ] 單檔案修改（< 100 行）
- [ ] 測試檔案修改
- [ ] 內部工具調整

**適用流程**:
```
DEVELOPER → REVIEWER → TESTER → 完成
```

### 🔴 HIGH RISK

**符合條件（任一）**:
- [ ] 涉及核心邏輯（認證/支付/安全）
- [ ] 修改多個檔案（> 5 個）
- [ ] 修改公開 API
- [ ] 修改資料庫 schema
- [ ] 刪除現有功能

**適用流程**:
```
DEVELOPER → REVIEWER(深度) → TESTER(完整) → 人工確認 → 完成
```

---

## 評估結果

```markdown
## 風險評估結果

**任務**: [任務描述]
**風險等級**: [🟢 LOW | 🟡 MEDIUM | 🔴 HIGH]

### 判定依據
- [列出符合的條件]

### 適用流程
[對應的流程]

### 特別注意事項
[如果有的話]
```

---

## 快速範例

### 範例 1: 更新 README

```markdown
**風險等級**: 🟢 LOW
**判定依據**:
- 只修改 README.md（文檔變更）
- 不涉及程式邏輯
**適用流程**: DEVELOPER → 自動驗證 → 完成
```

### 範例 2: 新增 API endpoint

```markdown
**風險等級**: 🟡 MEDIUM
**判定依據**:
- 新增功能
- 單一 endpoint，不影響現有 API
**適用流程**: DEVELOPER → REVIEWER → TESTER → 完成
```

### 範例 3: 修改登入邏輯

```markdown
**風險等級**: 🔴 HIGH
**判定依據**:
- 涉及 /auth/ 路徑
- 修改核心認證邏輯
**適用流程**: DEVELOPER → REVIEWER(深度) → TESTER(完整) → 人工確認
**特別注意**: 需額外進行安全審查
```
